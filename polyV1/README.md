# polyV1 多项式计算器

该目录提供了一个基于 Qt Widgets 的图形界面应用，封装并复用同级目录中的多项式运算实现，可用于对两个多项式进行加、减、乘、求导以及在给定 x 值处的代入计算。

## 目录结构

```
polyV1/
├── AlgorithmExpression.cpp # 解析中缀表达式并提供通用算术求值能力
├── AlgorithmExpression.h
├── CMakeLists.txt          # CMake 构建脚本，配置 Qt Widgets 程序并链接多项式实现
├── main.cpp                # 程序入口，创建并显示主窗口
├── mainwindow.h            # 主窗口声明，包含信号槽和辅助工具函数
├── mainwindow.cpp          # 主窗口实现，负责读取输入、调用多项式运算并渲染结果
├── mainwindow.ui           # Qt Designer 生成的界面布局文件
├── polynomial.cpp          # 多项式类与加减乘导等算法实现
├── polynomial.h
└── README.md               # 本说明文档
```

## 多项式输入格式

多项式使用字符串构造，要求每一项写成 `系数^指数` 的形式，项与项之间通过 `+` 或 `-` 连接。可以包含空格，程序会自动忽略；如果同一指数被多次书写，会在读取阶段自动合并系数。指数范围为 `0` 到 `9999`。例如：

- `3^0+2^1+1^2` 表示 \(3 + 2x + x^2\)
- `-5^0+4^3` 表示 \(-5 + 4x^3\)
- `1^0 - 2^1 + 3^2` 会被解析为 \(1 - 2x + 3x^2\)

> 注意：指数必须是非负整数，系数为整数。

## 功能简介

主界面包含两个多项式输入框（分别用于多项式 \(P(x)\) 与 \(Q(x)\)），一个整数输入框用于指定 x 的取值，以及五个操作按钮：

- **加法**：计算 \(P(x) + Q(x)\)
- **减法**：计算 \(P(x) - Q(x)\)
- **乘法**：计算 \(P(x) \times Q(x)\)
- **求导**：计算 \(P(x)\) 的一阶导数
- **代入 x**：在给定整数 x 处计算 \(P(x)\) 的值
- **计算表达式**：对任意支持 `+ - * / ^` 和括号的算术表达式进行求值

所有结果会在下方的只读文本区域中追加显示。

### 错误处理

- 如果多项式格式不正确、指数超出范围或计算过程中发生溢出，界面会弹出提示框说明原因。
- 多项式求值与表达式求值都进行了除零、溢出等异常检测，确保结果可靠。

## 构建与运行

1. 准备 Qt（5.15+ 或 6.x）与 CMake（3.16+）的开发环境。
2. 在仓库根目录下新建构建目录并生成工程，例如：

   ```bash
   mkdir build && cd build
   cmake -S ../polyV1 -B .
   cmake --build .
   ```

   - 如果 Qt 没有安装在标准路径，可以通过 `-DCMAKE_PREFIX_PATH=/path/to/Qt` 或设置 `Qt6_DIR`/`Qt5_DIR` 指定。
   - CMake 将自动处理 `mainwindow.ui` 并编译 `polynomial.cpp` 中的算法实现。

3. 生成的可执行文件位于构建目录（例如 `build/PolynomialCalculator`）中，运行即可打开图形界面。

## 主要文件详解

- **CMakeLists.txt**：开启 `AUTOMOC` 与 `AUTOUIC`，自动处理 Qt MOC 与 UI 文件；查找 Qt Widgets 模块并将 `polynomial.cpp` 作为源文件编译进应用。
- **main.cpp**：标准 Qt 应用入口，初始化 `QApplication` 并展示 `MainWindow`。
- **mainwindow.h / mainwindow.cpp**：
  - 提供加、减、乘、求导、代入与通用表达式求值等槽函数。
  - 对用户输入做正则校验，避免非法格式引发算法错误。
  - 将 `Polynomial` 结构体的结果转换为可读的代数表达式字符串，并复用 `AlgorithmExpression` 对算术表达式求值。
- **mainwindow.ui**：定义界面布局、输入框、按钮与结果展示区域，可在 Qt Designer 中进一步调整。

## 使用提示

- 输入多项式时可包含正负号，程序会自动忽略空格。
- “求导”和“代入 x”按钮只需要第一个多项式；如果第二个多项式为空也能正常工作。
- 结果区域会保留历史记录，方便比较不同运算结果。
- “算术表达式”区域支持括号和 `^` 运算，自动忽略空格，可处理前导正负号。

祝您使用愉快！
